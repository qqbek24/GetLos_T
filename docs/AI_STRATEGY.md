# AI Prediction Strategy

## Overview
The AI strategy uses machine learning (ML) to predict numbers based on analysis of historical data and patterns.

## Technology
- **Library**: scikit-learn (RandomForestClassifier)
- **Model**: Random Forest - ensemble of decision trees
- **Type**: Binary classification (for each number 1-49)

## How It Works

### 1. Training Data Preparation
- Analyzes sequences of historical draws
- Creates a feature vector for each draw:
  - Sum of numbers in previous draw
  - Count of even numbers
  - Range (max - min)
  - Frequency of first and last numbers
  - Gaps between consecutive numbers

### 2. Model Training
- Trains a separate classifier for each number (1-49)
- Learns patterns: "If previous draw had X, then number Y has a chance to appear"
- Uses 10 decision trees (n_estimators=10)

### 3. Prediction
- Predicts probability for each number based on the last draw
- Sorts numbers by probability
- **Selection Strategy**:
  - 3 numbers with highest probability (top 8)
  - 2-3 numbers with medium probability (weighted random choice)
  - Remaining randomly from other numbers

### 4. Fallback
If there's insufficient data (< 20 draws):
- Automatically switches to "balanced" strategy
- Guarantees a valid result always

## Features Used in the Model

| Feature | Description | Example |
|---------|-------------|---------|
| Sum | Sum of all numbers | 150 |
| Even Count | How many even numbers | 3 |
| Range | Max - Min | 42 |
| First Freq | Frequency of 1st number | 25 |
| Last Freq | Frequency of last number | 18 |
| Gaps (5x) | Differences between consecutive numbers | [2, 5, 8, 3, 15] |

## Advantages of AI Strategy

✅ **Pattern Learning** - Detects hidden dependencies in data  
✅ **Adaptation** - More data = better predictions  
✅ **Probabilistic Approach** - Not just top numbers, but intelligent mix  
✅ **Uniqueness** - Each invocation gives different results (element of randomness)  

## Limitations

⚠️ **Requires Data** - Minimum 20 historical draws  
⚠️ **No Win Guarantee** - It's just statistical analysis  
⚠️ **Computationally Intensive** - Slower than simple strategies  

## When to Use

- ✅ When you have rich draw history (50+ results)
- ✅ When you want to experiment with ML
- ✅ When looking for a "smarter" strategy than random
- ❌ When you have little data (< 20 draws)
- ❌ When you need quick results

## Comparison with Standard Strategies

| Strategy | Basis | Complexity | Requirements |
|----------|-------|------------|--------------|
| Random | Randomness | Low | None |
| Hot | Frequency | Low | History |
| Cold | Rarity | Low | History |
| Balanced | Hot + Cold | Medium | History |
| Combo Based | Pairs/Triples | Medium | History |
| **AI** | **ML Pattern** | **High** | **20+ draws** |

## Usage Example

### Frontend
```typescript
// Select AI strategy
setStrategy('ai')

// Call generation
const result = await api.generatePicks({ strategy: 'ai', count: 1 })
```

### Backend API
```python
POST /generate
{
  "strategy": "ai",
  "count": 1
}

Response:
[
  {
    "numbers": [5, 12, 23, 31, 38, 45],
    "strategy": "ai"
  }
]
```

## Potential Improvements (TODO)

- [ ] Add more features (even/odd ratio of entire set)
- [ ] Long-term trend analysis (months/years)
- [ ] Use neural networks (TensorFlow/PyTorch)
- [ ] Trained model caching
- [ ] A/B testing with other strategies
- [ ] Cross-validation

## Code

Implementation located in:
- **Backend**: `backend/main.py` → `pick_with_ai()` function
- **Frontend**: `frontend/src/config/icons.ts` → `STRATEGY_CONFIG.ai`
- **Types**: `frontend/src/types/index.ts` → added 'ai' to Strategy type

## Dependency Installation

```bash
# Backend
pip install scikit-learn==1.3.2 numpy==1.26.2

# Or rebuild Docker
docker-compose up -d --build
```

## Testing

```bash
# Manual API test
curl -X POST http://localhost:8000/generate \
  -H "Content-Type: application/json" \
  -d '{"strategy": "ai", "count": 3}'

# Result should contain 3 sets generated by AI
```

## Technical Notes

- Model is **not persisted** between calls (trains each time)
- Training takes ~100-500ms for 100-500 draws
- For very large datasets (1000+) consider caching
- RandomForest is deterministic (random_state=42), but final selection has randomness element

## Author

Implementation: AI Strategy for GetLos_T  
Date: January 11, 2026  
Version: 1.0
